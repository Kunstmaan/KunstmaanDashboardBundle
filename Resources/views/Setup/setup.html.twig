{% extends 'KunstmaanAdminBundle:Default:layout.html.twig' %}

{% block header %}{% endblock %}

{% block content %}
    <form method="post" action="" id="dashboard-setup-form">
        <h2>{{ 'dashboard.ga.setup.title' | trans }}</h2>

        <div class="setup-group" id="account-group">
            <select id="accounts" name="accounts" class="setup-item__shown">
                <option data-id="" selected>{{ 'dashboard.ga.setup.account.select' | trans }}</option>
                {% for account in accounts %}
                    <option data-id="{{account.accountId}}">
                        {{ account.accountName }}
                    </option>
                {% endfor %}
            </select>

            <select id="properties">
                <option data-id="">{{ 'dashboard.ga.setup.property.select' | trans }}</option>
            </select>

            <select id="profiles">
                <option data-id="">{{ 'dashboard.ga.setup.profile.select' | trans }}</option>
            </select>

            <div class="setup-group">
                <button disabled id="submit_save" class="btn btn-primary" type="submit">{{ 'form.save' | trans }}</button>
            </div>
        </div>

        <div class="setup-group" id="segment-group">
            <input type="checkbox" id="use-segments" value="true" /><label for="use-segments"> Add segements</label>
            <div id="segements"></div>
            <input type="button" class="btn" id="segement-button__add" value="Add" style="display:none"/>

            <div class="setup-group">
                <button id="submit_segement_save" class="btn btn-primary" type="submit" style="display:none">{{ 'form.save' | trans }}</button>
            </div>
        </div>

        <div class="setup-group" id="segment-group__list">
            <ul>
                {% for segment in segments %}
                    <li id="segment-list__{{ segment.id }}">
                        {{ segment.query }}<input type="button" class="segment-list-button__delete btn" data-segment-id="{{ segment.id }}" id="segement-button__add" value="X"/>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </form>

    <input type="hidden" id="path_accounts" data-url="{{ path('DashBoardBundle_AJAX_accounts') }}" />
    <input type="hidden" id="path_properties" data-url="{{ path('DashBoardBundle_AJAX_properties') }}" />
    <input type="hidden" id="path_profiles" data-url="{{ path('DashBoardBundle_AJAX_profiles') }}" />
    <input type="hidden" id="path_account_save" data-url="{{ path('DashBoardBundle_AJAX_account_save') }}" />
    <input type="hidden" id="path_property_save" data-url="{{ path('DashBoardBundle_AJAX_property_save') }}" />
    <input type="hidden" id="path_profile_save" data-url="{{ path('DashBoardBundle_AJAX_profile_save') }}" />
    <input type="hidden" id="path_segment_add" data-url="{{ path('DashBoardBundle_AJAX_segement_add') }}" />
    <input type="hidden" id="path_segment_delete" data-url="{{ path('DashBoardBundle_AJAX_segement_delete') }}" />
    <input type="hidden" id="path_config_save" data-url="{{ path('DashBoardBundle_AJAX_config_save') }}" />
{% endblock %}

{% block extrajavascript %}
    {% javascripts
        '@KunstmaanDashboardBundle/Resources/public/js/setup/setup.js'
        output='generated-js/ga_widget_setup.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}


{% block extracss %}
    {% stylesheets
        filter="scss"
        "@KunstmaanDashboardBundle/Resources/public/scss/_dashboard-setup.scss"
    %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css"/>
    {% endstylesheets %}
{% endblock %}

